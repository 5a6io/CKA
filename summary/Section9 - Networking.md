# 🍨 Section9 - Networking

## Prerequisite -Switching Routing


`ip link` 명령어를 실행하면 스위치에 연결하기 위해 사용하려는 Eth0라는 이름을 가진 인터페이스가 보임.


192.168.1.0 이라는 주소를 가진 네트워크라고 가정. 같은 네트워크에 IP 주소를 가진 시스템을 할당. `ip addr` 명령어를 사용.


link가 올라오고 IP 주소가 할당되면 컴퓨터는 스위치를 통해 다른 호스트와 통신할 수 있음.


스위치는 네트워크 내의 통신만 가능하게 하므로 네트워크에서 호스트로부터 패킷을 받을 수 있고 같은 네트워크 내 다른 시스템에 보낼 수 있음.


192.168.2.0에 시스템 C와 D를 포함하는 또 다른 네트워크가 있다고 가정. 시스템은 192.168.2.10과 192.168.2.11을 각각 가짐.


192.168.1.11을 가진 시스템 B에 다른 네트워크의 192.168.2.10을 가진 시스템 C가 도달하려면? 라우터가 있어야 함.


라우터는 두 네트워크 연결시키도록 함.


많은 네트워크 포트를 가진 또 다른 서버가 있다고 가정. 두 개의 개별 네트워크에 연결되기 때문에 각 네트워크에 각각 두 개의 IP가 할당됨.


첫 번째 네트워크는 192.168.1.1을 할당. 두 번째는 192.168.2.1을 할당. 이제 두 네트워크가 통신이 가능하도록 연결된 라우터가 있음.


시스템 B가 시스템 C로 패킷을 보내려고 할 때, 패킷을 전송하기 위해 라우터가 네트워크에서 어디에 있는지 어떻게 알 수 있는가? 라우터는 네트워크의 또 다른 장치임. 이와 같은 많은 기기가 있을 것. gateway나 route를 가지고 시스템을 구성.


네트워크가 방이라면 게이트웨이는 다른 네트워크나 인터넷으로 가는 외부 세게로 통하는 문.


시스템은 통과하려면 문이 어디에 있는지 알아야 함. 시스템에 존재하는 라우팅 구성을 보려면 `route` 명령어를 실행. 커널의 라우팅 테이블이 보임. 현재는 라우팅 구성이 없음. 따라서 시스템 B가 시스템 C에 도달할 수 없음.


시스템 B에 게이트웨이를 구성하기 위해 `ip route add`  명령어를 실행. 그리고 192.168.1.1  게이트웨이를 통해 192.168.2.0에 도달할 수 있도록 명시. `route` 명령어를 다시 실행하면 추가된 경로가 보임.  → 모든 시스템에서 구성해야 함.


이러한 시스템에 인터넷 액세스가 필요하다고 가정. 172.217.194.0 구글에 접근하려고 함. 인터넷에 라우터를 연결하고 라우팅 테이블에 새 경로 추가.


인터넷에는 다양한 네트워크에 수많은 다양한 사이트가 있음. 동일한 라우터 IP 주소를 라우팅 테이블에 추가하는 대신 경로를 모르는 네트워크에 대해 이 라우터를 기본  게이트웨이로 사용하라고 간단히 말할 수 있음. 이렇게 하면 기존 네트워크 외부의 모든 네트워크에 대한 요청이 이 특정 라우터로 전달됨. 따라서 이와 같은 간단할 설정에서는 라우터의 IP 주소에 기본 게이트웨이가 설정된 단일 라우팅 테이블 항목만 있으면 됨. default대신 0.0.0.0이라고도 함. 모든 IP 도착지.


게이트웨이 필드에 0.0.0.0이 항목이 있으면 게이트웨이가 필요하지 않다는 것을 나타냄. 예를 들어, 시스템 C가 192.168.2.0 네트워크의 장치에 액세스하려면 자체 네트워크에 있기 때문에 게이트웨이가 필요하지 않음. 그러나 여러 라우터가 있다고 가정. 하나는 인터넷을 위한 것이고, 다른 하나는 내부 사설망을 위한 것. 각 네트워크마다 두 개의 개별 항목이 있어야 함. 내부 사설 네트워크를 위한 하나의 항목과 공용 네트워크를 포함한 모든 다른 네트워크를 위한 기본 게이트웨이가 있는 다른 항목. 따라서, 시스템에서 인터넷에 연결하는 데 문제가 있는 경우 이 라우팅 테이블과 기본 게이트웨이 구성을 시작하는 것이 좋음.

> 리눅스 호스트를 라우터로 설정하는 방법

A, B, C 호스트가 있음. A와 B는 192.168.1.0에 연결됨. B와 C는 192.168.2.0에 연결됨. B는 eth0과 eth1 두 인터페이스를  사용하여 두 네트워크에 연결됨.


A는 192.168.1.5를 가지고 C는 192.168.2.5를 가짐. B는 192.168.1.6과 192.168.2.6 네트워크를 가짐.


A에서 C로 도달하려면 어떻게 해야 하는가? A에서 192.168.2.5로 ping을 보내면 도달하지 않음. → A에게 네트워크 2의 게이트웨이가 B를 통해 열려 있음을 알려야 함. 그리고 라우팅 테이블에  추가. 게이트웨이 192.168.1.6d에 대해 192.168.2.0 네트워크를 연결하도록 경로 추가. 패킷이 C로 전달되려면 호스트 C가 호스트 A에게 응답을 보내야 함.


C는 192.168.1.0 네트워크의 A에 도달하려고 할 때 같은 문제를 직면함. C는 라우터 역할을 하는 B를 통해 A로 도달할 수 있음을 알아야 함. 그러므로 C 라우팅 테이블에도 넣음. ping을 보내면 더 이상 도달할 수 없다는 에러 메시지가 발생하지 않음.


## Prerequisite - DNS


## Prerequisite - Network Namespaces


## Prerequisite - Docker Networking


## Prerequisite - CNI


## Cluster Networking


## Practice Test - Explore Kubernetes Environment


## Pod Networking


## CNI in kubernetes


## CNI weave


## Practice Test - Explore CNI


## Practice Test - Deploy Network Solution


## IP Address Management -  Weave


## Practice Test - Networking Weave


## Service Networking


## Practice Test - Service Networking


## DNS in kubernetes


## CoreDNS in kubernetes


## Practice Test - Explore DNS


## Ingress


## Practice Test - Ingress -1


## Practice Test - Ingress -2


## Introduction to Gateway API


## Practice Test - Gateway API

